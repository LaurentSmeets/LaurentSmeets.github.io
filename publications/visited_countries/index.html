<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Countries Visited Animated GIF</title>
  <meta property="og:title" content="Countries Visited Animated GIF" />
  <meta property="og:image" content="https://LaurentSmeets.github.io/img/DSC_0109a%20-%20kopie_edited.jpg" />
  <meta name="description" content="">
  <meta property="og:description" content="" />
  <meta name="author" content="Laurent Smeets">

  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
  
  <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
  <link href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" rel="stylesheet">
  <link href='https://cdnjs.cloudflare.com/ajax/libs/devicons/1.8.0/css/devicons.min.css' rel='stylesheet'>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.min.css" rel="stylesheet">
  
  <link href="https://LaurentSmeets.github.io/css/resume2.css" rel="stylesheet">
  <link href="https://LaurentSmeets.github.io/css/tweaks2.css" rel="stylesheet">
  <meta name="generator" content="Hugo 0.53" />
  
   
  
</head>
<body id="page-top">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
  <a class="navbar-brand js-scroll-trigger" href="#page-top">
    <span class="d-block d-lg-none">Laurent Smeets</span>
    <span class="d-none d-lg-block">
      <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="/img/DSC_0109a%20-%20kopie_edited.jpg" alt="">
    </span>
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link js-scroll-trigger" href="/#about">About</a>
      </li>
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#skills">Skills and Languages</a>
          </li>
      
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#education">Education</a>
          </li>
      
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#experience">Experience</a>
          </li>
      
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#projects">Projects</a>
          </li>
      
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#tutorials">Tutorials</a>
          </li>
      
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#publications">Publications</a>
          </li>
      


      
      
    </ul>
  </div>
</nav>

<link rel="stylesheet" href="https://LaurentSmeets.github.io/css/github-gist.css" rel="stylesheet" id="theme-stylesheet">
<script src="https://LaurentSmeets.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

  <div class="container-fluid p-0">
    
<nav aria-label="breadcrumb">
  <ol  class="breadcrumb">
    





<li class="breadcrumb-item">
  <a href="https://LaurentSmeets.github.io/">Home</a>
</li>


<li class="breadcrumb-item">
  <a href="https://LaurentSmeets.github.io/publications/">Publications</a>
</li>


<li class="breadcrumb-item active">
  <a href="https://LaurentSmeets.github.io/publications/visited_countries/">Countries Visited Animated GIF</a>
</li>

  </ol>
</nav>





<link rel="stylesheet" href="https://LaurentSmeets.github.io/css/github-gist.css" rel="stylesheet" id="theme-stylesheet">
<script src="https://LaurentSmeets.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<section class="resume-section p-3 p-lg-5 d-flex d-column content">
  <div class="my-auto">
    <h2 class="mb-0"><span class="text-primary">Countries Visited Animated GIF</span></h2>
    <p><a href="https://github.com/LaurentSmeets/animatedworldmap">Link to full </a></p>
    
    

<h3 id="introduction">Introduction</h3>

<p>Since I am planning on using some gg_animate gifs for my thesis, it seemed like a good idea to start with a small project. This gif shows the countries I have visited thus far in order (or so I think, I haven&rsquo;t gone through the photo albums yet). A lot of the code was inspired by this <a href="https://gist.github.com/rafapereirabr/0d68f7ccfc3af1680c4c8353cf9ab345#file-life_expect_world_map_gif-md">Github page</a>. However, I did use the latest <code>gg_animate</code> grammar. Countries that I visited more than once, only show up the first time I visited them.</p>

<h3 id="packages">Packages</h3>

<p>These are the R packages I used:</p>

<pre><code class="language-r">library(curl)
library(readxl)
library(data.table)
library(rworldmap)
library(ggplot2)
library(dplyr)
library(tweenr)
library(ggthemes)
library(rgeos)
library(countrycode)
library(gganimate)
library(knitr)
library(kableExtra)
</code></pre>

<h3 id="data">Data</h3>

<p>I created an Excel file with all countries in the world, which can be easily found on the internet. I just used the file used in above-mentioned Github page and cleaned that. Then I added an extra column with the order of which I visited the countries. Maybe, if I feel like it, I will update it and also add dates/years later. This is how the data then looks likes:</p>

<pre><code class="language-r">df &lt;- read_excel(path= &quot;countries_in order.xlsx&quot;, sheet=1)
df%&gt;%
  head(13)%&gt;%
  kable()%&gt;%
  kable_styling(bootstrap_options =  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;),
                full_width = F,
                position = &quot;left&quot;)
</code></pre>

<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; ">
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> visit </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Burundi </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Comoros </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Djibouti </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Eritrea </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Ethiopia </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kenya </td>
   <td style="text-align:right;"> 12 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Madagascar </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Malawi </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mauritius </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mayotte </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mozambique </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> RÃ©union </td>
   <td style="text-align:right;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Rwanda </td>
   <td style="text-align:right;"> 45 </td>
  </tr>
</tbody>
</table>

<h3 id="data-manipulation">Data manipulation</h3>

<p>First we add the ISO3 code to the data</p>

<pre><code class="language-r">setDT(df)
df[, country_iso3c := countrycode(Country, 'country.name', 'iso3c')]
</code></pre>

<p>Now we load the map and create the data.table we need for the polygon plotting in ggplot2.</p>

<pre><code class="language-r">wmap &lt;- getMap()
wmap &lt;- spTransform(wmap, CRS(&quot;+proj=robin&quot;)) # reproject
wmap &lt;-   subset(wmap, !(NAME %like% &quot;Antar&quot;)) # Remove Antarctica
wmap_df &lt;- fortify(wmap, region = &quot;ISO3&quot;)
wmap_df &lt;- left_join(wmap_df, df, by = c('id'='country_iso3c'))
</code></pre>

<p>In order to add a grey background, that is not influenced by the animation, I simply duplicated the data.table and added a postscript to the variable names.</p>

<pre><code class="language-r">wmap_df2 &lt;- wmap_df
colnames(wmap_df2) &lt;- paste(colnames(wmap_df2), &quot;2&quot;, sep = &quot;_&quot;)
</code></pre>

<h3 id="make-the-plot">Make the plot</h3>

<pre><code class="language-r">p &lt;- ggplot() +
  geom_polygon(data = wmap_df,
               aes(x = long,
                   y = lat,
                   group = group),
               fill=&quot;#800000&quot;)+
  geom_polygon(data = wmap_df2, # this is the background map, that is not influenced by the animated part of the gif
               aes(x = long_2,
                   y = lat_2,
                   group = group_2),
               fill=&quot;grey&quot;,
               alpha=.3)+
  theme_void() +
  coord_cartesian(xlim = c(-11807982, 14807978)) +
  transition_manual(visit)+
  shadow_trail(distance = 0.01, alpha=.4) # add a small number for distance, to make all visited countries show.
</code></pre>

<h3 id="make-and-save-the-animation">Make and save the animation</h3>

<p>This code is used to render and then save the GIF.</p>

<pre><code class="language-r">animate(p, duration=30)
</code></pre>

<p><img src="/img/unnamed-chunk-7-1.gif" alt="Example image" /><!-- --></p>

<pre><code class="language-r">anim_save(&quot;countries_visited.gif&quot;, animation = p, duration =30)
</code></pre>

    <p class="mt-3">
    <ul class="tags">
    
      <li><a class="tag" href="/tags/travel">Travel</a></li>
    
      <li><a class="tag" href="/tags/r">R</a></li>
    
      <li><a class="tag" href="/tags/plot">plot</a></li>
    
</ul>


<link rel="stylesheet" href="https://LaurentSmeets.github.io/css/github-gist.css" rel="stylesheet" id="theme-stylesheet">
<script src="https://LaurentSmeets.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

    </p>
  </div>
</section>


    <span style="color: #999999; font-size: 60%;">Nifty <a href="https://codepen.io/wbeeftink/pen/dIaDH">tech tag lists</a> fromÂ <a class="pen-owner-link" href="https://codepen.io/wbeeftink">Wouter Beeftink</a> </span>
    
  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.bundle.min.js"></script>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
  
  <script src="/js/resume.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id="></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    %gtag('config', '');
  </script>
  

  
</body>
</html>
